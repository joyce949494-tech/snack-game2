<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<title>æ‰¾æ›¸æŒ‘æˆ° â€” é¤¨è—æŸ¥è©¢</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body { font-family: "Microsoft JhengHei", sans-serif; background:#f6f8fb; margin:0; padding:18px; color:#222; }
  .wrap { max-width:1100px; margin:auto; background:white; border-radius:12px; padding:16px; box-shadow:0 6px 20px rgba(0,0,0,0.08); }
  h2{ margin:6px 0 14px 0; font-size:20px; }
  .layout { display:flex; gap:14px; flex-wrap:wrap; }
  .left, .right { background:#fff; border-radius:8px; padding:12px; box-shadow:0 3px 8px rgba(0,0,0,0.04); }
  .left { flex:1 1 320px; min-width:260px; max-width:420px; }
  .right { flex:2 1 520px; min-width:300px; }
  .book-img { width:100%; border-radius:8px; object-fit:contain; background:#eee; }
  .desc { font-size:15px; line-height:1.5; margin-top:8px; }
  iframe { width:100%; height:520px; border:1px solid #ddd; border-radius:8px; background:white; }
  .floor-row { display:flex; gap:8px; flex-wrap:wrap; margin-top:12px; }
  .floor-btn { flex:0 0 120px; padding:10px; border-radius:8px; border:none; cursor:pointer; background:#1976d2; color:white; font-size:15px; }
  .floor-btn.secondary { background:#7b1fa2; }
  #msg { margin-top:12px; min-height:44px; font-size:15px; }
  .controls { display:flex; gap:8px; margin-top:10px; }
  .link-btn { padding:8px 12px; background:#388e3c; color:white; border-radius:8px; border:none; cursor:pointer; }
  .next-btn { padding:8px 12px; background:#ff9800; color:white; border-radius:8px; border:none; cursor:pointer; display:none; }
  @media (max-width:900px){ .layout{flex-direction:column} iframe{height:420px} }
</style>
</head>
<body>
  <div class="wrap">
    <h2>é¤¨è—æ‰¾æ›¸æŒ‘æˆ°</h2>
    <p>å·¦é‚Šé¡¯ç¤ºé¡Œç›®ï¼ˆæ›¸å°æˆ–ä½œè€…ä»‹ç´¹ï¼‰ï¼Œå³é‚Šæ˜¯åœ–æ›¸é¤¨é¤¨è—æŸ¥è©¢é ã€‚è«‹ä½¿ç”¨é¤¨è—æŸ¥è©¢ç¢ºèªæ¨“å±¤ï¼Œç„¶å¾Œå¾ä¸‹æ–¹æ¨“å±¤æŒ‰éˆ•é¸å‡ºæ­£ç¢ºæ¨“å±¤ã€‚</p>

    <div class="layout">
      <div class="left">
        <div id="leftContent">
          <!-- æ›¸åœ–æˆ–æ–‡å­—æœƒé¡¯ç¤ºåœ¨é€™ -->
        </div>
        <div class="floor-row" id="floorButtons"></div>
        <div id="msg"></div>
        <div class="controls">
          <button class="link-btn" id="openSearch">åœ¨æ–°åˆ†é é–‹å•Ÿé¤¨è—æŸ¥è©¢</button>
          <button class="next-btn" id="nextBtn">ä¸‹ä¸€é¡Œ</button>
        </div>
      </div>

      <div class="right">
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <strong>åœ–æ›¸é¤¨é¤¨è—æŸ¥è©¢</strong>
          <small style="color:#666">ï¼ˆè‹¥è¢«é˜»æ“‹ï¼Œè«‹ç”¨ã€Œåœ¨æ–°åˆ†é é–‹å•Ÿé¤¨è—æŸ¥è©¢ã€ï¼‰</small>
        </div>
        <!-- ä¸‹é¢çš„ iframe æœƒè¼‰å…¥é¤¨è—ç³»çµ± -->
        <iframe id="libFrame" src="https://sierra.lib.ntust.edu.tw/*cht" title="é¤¨è—æŸ¥è©¢"></iframe>
      </div>
    </div>
  </div>

<script>
/*
  ä½¿ç”¨èªªæ˜ï¼š
  - questions é™£åˆ—æ¯ä¸€é¡ŒåŒ…å«:
     type: "image" æˆ– "text"
     content: åœ–ç‰‡ç¶²å€ æˆ– æ–‡å­—èªªæ˜ (ä½œè€…æˆ–æ›¸ä»‹)
     correctFloor: ä½ è¦åˆ¤å®šçš„æ­£ç¢ºæ¨“å±¤ï¼ˆå­—ä¸²ï¼‰
     help: ï¼ˆé¸å¡«ï¼‰ç­”éŒ¯æ™‚çµ¦äºˆæ•™å­¸æç¤º
  - æ”¹ questions é™£åˆ—å³å¯æ›´æ›é¡Œç›®
*/

const questions = [
  // ç¯„ä¾‹ç¬¬ä¸€é¡Œï¼šä»¥æ›¸å/æ›¸å°æŸ¥è©¢ï¼ˆè«‹æŠŠ correctFloor æ”¹æˆå¯¦éš›æ¨“å±¤ï¼‰
  {
    id:1,
    type:"image",
    content:"https://i.imgur.com/LtJL7i9.jpeg", // æ›¸å°æˆªåœ–æˆ–å°é¢
    correctFloor:"3æ¨“",  // â† æ”¹æˆæ­£ç¢ºæ¨“å±¤
    help:"æç¤ºï¼šé€™æœ¬æ›¸å±¬æ–¼å·¥ç¨‹å­¸é¡ï¼Œé€šå¸¸åœ¨ 3 æ¨“çš„åƒè€ƒæ›¸å€"
  },
  // ç¯„ä¾‹ç¬¬äºŒé¡Œï¼šä»¥ä½œè€…æˆ–æ–‡å­—ä»‹ç´¹æŸ¥è©¢ï¼ˆä½œè€…å¯è¤‡è£½åˆ°é¤¨è—ç³»çµ±æœå°‹ï¼‰
  {
    id:2,
    type:"text",
    content:"ä½œè€…ï¼šç‹å°æ˜ï¼›ç°¡ä»‹ï¼šæœ¬æ›¸æ¢è¨è³‡æ–™åº«è¨­è¨ˆèˆ‡æ‡‰ç”¨ï¼Œç‚ºå¤§å­¸æœ¬ç§‘æ•™æ", 
    correctFloor:"2æ¨“", // â† æ”¹æˆæ­£ç¢ºæ¨“å±¤
    help:"æç¤ºï¼šæ•™æèˆ‡æ•™ç§‘æ›¸é€šå¸¸æ”¾åœ¨ 2 æ¨“æ•™ç§‘æ›¸/åƒè€ƒå€"
  }
];

let current = 0;
const left = document.getElementById('leftContent');
const floorButtons = document.getElementById('floorButtons');
const msg = document.getElementById('msg');
const libFrame = document.getElementById('libFrame');
const openSearch = document.getElementById('openSearch');
const nextBtn = document.getElementById('nextBtn');

// æ¨£æœ¬æ¨“å±¤æŒ‰éˆ•ï¼ˆä½ å¯ä¾åœ–æ›¸é¤¨å¯¦éš›æ¨“å±¤æ”¹è®Šï¼‰
const floors = ["B1","1æ¨“","2æ¨“","3æ¨“","4æ¨“","åƒè€ƒå®¤"];

function renderQuestion() {
  msg.innerText = '';
  nextBtn.style.display = 'none';
  floorButtons.innerHTML = '';

  if(current >= questions.length) {
    left.innerHTML = "<h3>ğŸ‰ å…¨éƒ¨å®Œæˆï¼</h3><p>ä½ å·²å®Œæˆæ‰¾æ›¸æŒ‘æˆ°ã€‚</p>";
    libFrame.src = "about:blank";
    return;
  }

  const q = questions[current];

  if(q.type === "image") {
    left.innerHTML = `<img class="book-img" src="${q.content}" alt="æ›¸å°">`;
  } else {
    left.innerHTML = `<div class="desc"><strong>è«‹ç”¨ä½œè€… / é—œéµå­—æŸ¥è©¢ï¼š</strong><p>${q.content}</p></div>`;
  }

  // å»ºç«‹æ¨“å±¤æŒ‰éˆ•
  floors.forEach((f, idx) => {
    const b = document.createElement('button');
    b.className = 'floor-btn' + (idx%2? ' secondary':'');
    b.innerText = f;
    b.onclick = () => checkFloor(f);
    floorButtons.appendChild(b);
  });

  // openSearch æœƒä½¿ç”¨ iframe ç¾åœ¨çš„ URLï¼ˆæˆ–å›ºå®šé¤¨è—é¦–é ï¼‰
  openSearch.onclick = () => {
    // è‹¥ä½ æƒ³è¦ç›´æ¥æŠŠé—œéµå­—æ”¾åˆ°åœ–æ›¸é¤¨æŸ¥è©¢ï¼Œå¯æ”¹æˆå¸¶ query çš„ URL
    window.open(libFrame.src, '_blank');
  };
}

function checkFloor(selected) {
  const q = questions[current];
  if(selected === q.correctFloor) {
    msg.innerHTML = `âœ… æ­£ç¢ºï¼é€™æœ¬æ›¸åœ¨ã€Œ${q.correctFloor}ã€ã€‚`;
    nextBtn.style.display = 'inline-block';
    // è¨˜åˆ†æˆ–å…¶ä»–å›é¥‹å¯æ”¾é€™è£¡
  } else {
    msg.innerHTML = `âŒ å¥½åƒä¸å°ï¼Œ${q.help ? q.help : 'å†è©¦è©¦çœ‹æˆ–ç”¨é¤¨è—ç³»çµ±å°‹æ‰¾'}ã€‚`;
  }
}

nextBtn.onclick = () => {
  current++;
  renderQuestion();
};

// åˆå§‹
renderQuestion();

</script>
</body>
</html>
