<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>è¨è«–å®¤ä»»å‹™æŒ‘æˆ°</title>

<style>
body {
  font-family: "Microsoft JhengHei", sans-serif;
  background: #f0f6ff;
  margin: 0;
  padding: 0;
  text-align: center;
}

/* ä¸»å®¹å™¨ */
.container {
  width: 90%;
  margin: auto;
  padding-top: 20px;
}

/* NPC å€ */
.npc-area {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 25px;
  margin-top: 20px;
}

/* NPC åœ–ç‰‡ + åå­—å®¹å™¨ */
.npc-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  transition: 0.2s;
}

.npc-box:hover {
  transform: scale(1.05);
}

.npc-img {
  width: 100px;
  border-radius: 50%;
}

.npc-name {
  margin-top: 5px;
  font-weight: bold;
}

/* é¡Œç›®è·³å‡ºè¦–çª— */
.question-box {
  width: 90%;
  max-width: 600px;
  margin: auto;
  background: white;
  padding: 25px;
  border-radius: 16px;
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
  display: none;
}

.choice-btn {
  background: #4a89e8;
  color: white;
  border: none;
  padding: 12px 22px;
  border-radius: 10px;
  margin: 10px;
  font-size: 17px;
  cursor: pointer;
}

.choice-btn:hover {
  background: #3569c9;
}

/* é ç´„è¡¨ï¼ˆåªåœ¨ç¬¬2é¡Œæœƒå‡ºç¾ï¼‰ */
.schedule-img {
  width: 90%;
  max-width: 400px;
  border-radius: 10px;
  margin: 15px auto;
  display: none;
}
</style>
</head>

<body>

<div class="container">
  <h2>ğŸ“š è¨è«–å®¤è«®è©¢ä¸­å¿ƒ</h2>
  <p>è«‹é»æ“Šä»»ä¸€ä½å­¸ç”Ÿï¼Œå¹«åŠ©ä»–å€‘è§£æ±ºå•é¡Œï¼</p>

  <!-- NPC å€ -->
  <div id="npcArea" class="npc-area"></div>
</div>

<!-- é¡Œç›®ç›’å­ -->
<div id="questionBox" class="question-box">
  <h3 id="qTitle"></h3>
  <p id="qDesc"></p>

  <!-- å°ˆå±¬ç¬¬ 2 é¡Œçš„é ç´„è¡¨ -->
  <img id="scheduleImg" class="schedule-img"
       src="https://i.imgur.com/N4mz8Te.png">

  <div id="choices"></div>
</div>

<script>
// ---------- 1ï¸âƒ£ é¡Œåº«è¨­å®š ----------
const questions = [
  {
    id: 1,
    img: "https://i.imgur.com/IaTyfvD.png",
    name: "æˆ‘æ˜¯å°ç¾",
    title: "å°ç¾å•ï¼š",
    desc: "æˆ‘å€‘æœ‰ 2 å€‹äººï¼Œå¯ä»¥å€Ÿç”¨è¨è«–å®¤å—ï¼Ÿ",
    choices: [
      {text: "å¯ä»¥", correct: false},
      {text: "ä¸è¡Œï¼Œäººæ•¸é™åˆ¶ 3~5 äººå–”", correct: true}
    ]
  },
  {
    id: 2,
    img: "https://i.imgur.com/TXbmO6l.png",
    name: "å¤ªé™½é¤…",
    title: "å¤ªé™½é¤…å•ï¼š",
    desc: "æˆ‘å’Œæœ‹å‹æƒ³é ç´„ 10:00â€“12:00ï¼Œæˆ‘å¯ä»¥é¸å“ªé–“è¨è«–å°é–“ï¼Ÿ(è«‹æŸ¥çœ‹é ç´„è¡¨)",
    choices: [
      {text: "D01", correct: false}
      {text: "D02", correct: true},
      {text: "D03", correct: false}
      {text: "D04", correct: false}
    ],
    showSchedule: true
  },
  {
    id: 3,
    img: "https://i.imgur.com/MlustBH.png",
    name: "ä¹’ä¹“ä¹’ä¹“çƒ",
    title: "ä¹’ä¹“ä¹’ä¹“çƒå•ï¼š",
    desc: "æˆ‘é ç´„ 10:00â€“12:00ï¼Œä½†æˆ‘ 10:30 æ‰åˆ°ï¼Œé‚„èƒ½ä½¿ç”¨å—ï¼Ÿ",
    choices: [
      {text: "å¯ä»¥ï¼Œåªè¦æ™‚æ®µå…§éƒ½èƒ½ä½¿ç”¨", correct: false},
      {text: "è¶…é 15 åˆ†é˜æœªå ±åˆ°æœƒå–æ¶ˆï¼Œä¸èƒ½ç”¨äº†", correct: true}
    ]
  },
  {
    id: 4,
    img: "https://i.imgur.com/nBSxIyr.png",
    name: "å‚³èªªä¸­çš„å°æ˜",
    title: "å‚³èªªä¸­çš„å°æ˜å•ï¼š",
    desc: "æˆ‘å¯ä»¥æ‹¿é£²æ–™é€²å»è¨è«–å®¤å—ï¼Ÿ",
    choices: [
      {text: "å¯ä»¥", correct: false},
      {text: "ä¸è¡Œï¼Œè¨è«–å®¤ç¦æ­¢é£²é£Ÿ", correct: true}
    ]
  },
  {
    id: 5,
    img: "https://i.imgur.com/X5B5GCb.png",
    name: "é»‘é“çŒ©çŒ©",
    title: "é»‘é“çŒ©çŒ©å•ï¼š",
    desc: "å–‚~ è¨è«–å®¤ä¸€æ¬¡æœ€å¤šèƒ½å€Ÿç”¨å¤šä¹…ï¼Ÿ",
    choices: [
      {text: "1 å°æ™‚", correct: false},
      {text: "2 å°æ™‚", correct: true}
    ]
  }
];

let remaining = [...questions]; // å°šæœªè§£æ±ºçš„ NPC

// ---------- 2ï¸âƒ£ ä¸»ç•«é¢ NPC ç”Ÿæˆï¼ˆå«éš¨æ©Ÿæ’åºï¼‰ ----------
function renderNPCs() {
  const area = document.getElementById("npcArea");
  area.innerHTML = "";

  if (remaining.length === 0) {
    // å…¨éƒ¨å®Œæˆï¼Œè·³è½‰çµç®—é é¢
    window.location.href = "student2.html"; // é€™è£¡æ”¹æˆä½ çš„å®Œæˆé é¢
    return;
  }

  const shuffled = [...remaining].sort(() => Math.random() - 0.5);

  shuffled.forEach(q => {
    let npcBox = document.createElement("div");
    npcBox.className = "npc-box";
    npcBox.onclick = () => openQuestion(q.id);

    let npcImg = document.createElement("img");
    npcImg.src = q.img;
    npcImg.className = "npc-img";

    let npcName = document.createElement("div");
    npcName.className = "npc-name";
    npcName.innerText = q.name;

    npcBox.appendChild(npcImg);
    npcBox.appendChild(npcName);
    area.appendChild(npcBox);
  });
}

renderNPCs();

// ---------- 3ï¸âƒ£ é¡¯ç¤ºé¡Œç›® ----------
function openQuestion(id) {
  const q = remaining.find(x => x.id === id);
  if (!q) return;

  document.getElementById("npcArea").style.display = "none";

  const box = document.getElementById("questionBox");
  box.style.display = "block";

  document.getElementById("qTitle").innerText = q.title;
  document.getElementById("qDesc").innerText = q.desc;

  document.getElementById("scheduleImg").style.display =
    q.showSchedule ? "block" : "none";

  let choiceBox = document.getElementById("choices");
  choiceBox.innerHTML = "";

  q.choices.forEach(c => {
    let btn = document.createElement("button");
    btn.className = "choice-btn";
    btn.innerText = c.text;
    btn.onclick = () => checkAnswer(id, c.correct);
    choiceBox.appendChild(btn);
  });
}

// ---------- 4ï¸âƒ£ é¸é …åˆ¤å®š ----------
function checkAnswer(id, isCorrect) {
  alert(isCorrect ? "âœ” ç­”å°äº†ï¼å­¸ç”Ÿæ»¿æ„çš„é›¢é–‹äº†" : "âœ˜ å“‡...æƒ³ä¸€ä¸‹ç­‰ç­‰å†å›ï½");

  if (isCorrect) {
    remaining = remaining.filter(x => x.id !== id);
  }

  backToMain();
}

// ---------- 5ï¸âƒ£ å›ä¸»ç•«é¢ ----------
function backToMain() {
  document.getElementById("questionBox").style.display = "none";
  document.getElementById("npcArea").style.display = "flex";
  renderNPCs();
}
</script>

</body>
</html>
