<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ä¸‰æ¨“é–±è¦½å¸­ï½œåˆ†é…åº§ä½éŠæˆ²</title>
<style>
body {
  font-family: "Microsoft JhengHei", sans-serif;
  background: #eef6ff;
  text-align: center;
  padding: 20px;
}

/* å­¸ç”Ÿå¡ç‰‡ */
.student {
  width: 120px;
  padding: 12px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 0 8px rgba(0,0,0,0.15);
  margin: 10px;
  cursor: grab;
}

.student:active {
  cursor: grabbing;
}

/* åº§ä½åœ–å®¹å™¨ */
.map-container {
  position: relative;
  width: 700px;
  margin: 20px auto;
}

.map-container img {
  width: 100%;
  border-radius: 12px;
}

/* åº§ä½æ‹–æ”¾å€åŸŸ */
.seat-zone {
  position: absolute;
  border: 2px dashed transparent; /* å¯è¦–åŒ–æ™‚å¯æ”¹æˆç´…æ¡†èª¿æ•´ä½ç½® */
  cursor: pointer;
}
#msg {
  margin-top: 20px;
  font-size: 20px;
  font-weight: bold;
  color: #444;
}
</style>
</head>
<body>

<h2>ğŸ”¹ ä¸‰æ¨“é–±è¦½å¸­ï½œæ›¿å­¸ç”Ÿåˆ†é…åº§ä½</h2>
<p>æ‹–æ›³å­¸ç”Ÿå¡åˆ°åº§ä½å€åŸŸï¼ˆå¤šäººä¸€èµ·åçš„çµ„åªéœ€æ‹–ä¸€æ¬¡ï¼‰</p>

<div id="students" style="display:flex; justify-content:center; flex-wrap:wrap;"></div>

<div class="map-container">
  <img src="https://i.imgur.com/B9oHV5K.jpeg" alt="åº§ä½åœ–">

  <!-- å¯é¸åº§ä½å€åŸŸï¼ˆç”¨åº§æ¨™å®šä½ï¼‰ -->
  <!-- ç¯„ä¾‹åº§æ¨™ï¼Œå¯èª¿æ•´ä»¥ç¬¦åˆåº§ä½åœ– -->
  <div class="seat-zone" id="seat-113" style="top:60px; left:80px; width:40px; height:40px;"></div>
  <div class="seat-zone" id="seat-114" style="top:60px; left:130px; width:40px; height:40px;"></div>
  <div class="seat-zone" id="seat-121" style="top:120px; left:80px; width:40px; height:40px;"></div>
  <div class="seat-zone" id="seat-122" style="top:120px; left:130px; width:40px; height:40px;"></div>
  <div class="seat-zone" id="seat-123" style="top:120px; left:180px; width:40px; height:40px;"></div>
</div>

<p id="msg"></p>

<script>
// å­¸ç”Ÿåˆ†çµ„ï¼ˆæœ€å¤š 3 äººä¸€çµ„ï¼‰
const students = [
  {id:1, name:"å°ç¾", group:1},
  {id:2, name:"å°å‚‘", group:2},
  {id:3, name:"é˜¿è¯", group:3},
  {id:4, name:"å°æ—", group:3},
  {id:5, name:"å°ç‹", group:2}
];

let remainingGroups = [...new Set(students.map(s=>s.group))];

// ç”Ÿæˆå­¸ç”Ÿå¡
function renderStudents() {
  const box = document.getElementById("students");
  box.innerHTML = "";
  // æ¯çµ„åªç”Ÿæˆä¸€æ¬¡å¡ç‰‡
  remainingGroups.forEach(g=>{
    const groupStudents = students.filter(s=>s.group===g);
    const div = document.createElement("div");
    div.className = "student";
    div.draggable = true;
    div.id = "group-"+g;
    div.innerHTML = `<b>çµ„${g}</b><br>` + groupStudents.map(s=>s.name).join(", ");
    div.ondragstart = e => e.dataTransfer.setData("group", g);
    box.appendChild(div);
  });
}

renderStudents();

// æ‹–æ”¾è™•ç†
const seatZones = document.querySelectorAll(".seat-zone");
seatZones.forEach(zone=>{
  zone.addEventListener("dragover", e=> e.preventDefault());
  zone.addEventListener("drop", e=>{
    e.preventDefault();
    const groupId = e.dataTransfer.getData("group");
    const div = document.getElementById("group-"+groupId);
    if(!div) return;

    // æˆåŠŸæ”¾ç½®
    div.remove(); // ç§»é™¤å­¸ç”Ÿå¡
    remainingGroups = remainingGroups.filter(g=>g!=groupId);
    showMsg("âœ” çµ„" + groupId + " å®‰æ’æˆåŠŸï¼");

    // è‹¥å…¨éƒ¨å®‰æ’å®Œæˆï¼Œåœ 2 ç§’å¾Œè·³è½‰
    if(remainingGroups.length===0){
      showMsg("ğŸ‰ å…¨éƒ¨å­¸ç”Ÿåº§ä½å®‰æ’å®Œæˆï¼");
      setTimeout(()=> {
        window.location.href = "npc_question_page.html"; // ä½ çš„ NPC å•é¡Œé é¢
      }, 2000);
    }
  });
});

function showMsg(txt){
  document.getElementById("msg").innerText = txt;
}
</script>
</body>
</html>
